## 操作系统概念：
### 层次结构
>裸机（硬件）->操作系统->应用程序->用户

1.操作系统概念定义及功能目标
-
1. [协调硬件软件等**计算机资源**（或者说控制硬件和软件资源）](#jump1.1)
2. [为上层应用程序、用户提供简单易用的服务以及**接口**](#jump1.2)
3. 操作系统属于软件层面
1. [是最基本的系统软件](#jump1.3)

### <span id="jump1.1">1.1作为系统资源的管理者</span>
> &emsp;&emsp;补充：进程是一个程序的执行过程。执行前需要放到内存中，才能被cpu处理
> &emsp;提供的功能：
>- 处理机管理
>- 存储器管理
>- 文件管理
>- 设备管理

> 目标
>- 安全高效
### <span id="jump1.2">1.2用户和计算机之间的接口</span>
>* 命令接口：允许用户**直接**使用，也分为联机命令接口和脱机命令接口
>* 程序借口：允许用户**间接**通过程序直接使用
>* GUI：现代操作系统中最流行的图形用户接口  
主要是方便用户进行使用。  
### <span id="jump1.3">1.3实现对硬件的扩展</span>  
>* 扩充机器，是对硬件的**一级**扩充    

2.操作系统特征
-  
### 并发
>* 概念及和并行的区别：  
**并发性:系统中同时存在多个运行着的程序。并发:** 两个或多个事件在同一时间段内发生，宏观上同时发生，微观上是交替发生的。**并行:** 多个事件在同时刻同时发生。操作系统和并发是一起诞生的。
### 共享/资源共享
>* **互斥共享**
资源可以共享，但**一个时间段内只允许一个进程访问该资源**
>* **同时共享**  
**允许一个时间段内由多个进程“同时”对他们进行访问**  
>* 同时的概念往往是微观上的，实际程序中还是交替进行资源的访问，并发和共享是相互依存的，没有并发，则共享也没有必要了，并发性和共享性互为存在条件  

背景知识：程序需要**放入内存**并**分配给他cpu**才能执行
>* **虚拟**  
概念：把一个物理上的实体分成逻辑上的若干个对应物。虚拟技术分为**空分复用技术**（虚拟内存）和**时分复用技术** （虚拟处理器） 
>* **异步**  
概念：多道程序环境下，资源有限，进程的执行不是一贯到底的。执行速度不可预知。  
只有系统拥有了并发才需要异步性  
**没有并发和共享，异步和虚拟就无从谈起了**   

3.运行机制和体系结构
-
>* 指令是计算机cpu可以处理的最小单元，分为**非特权指令**和**特权指令**（不允许用户程序使用）  
>* cpu如何判断当前是否可以执行特权指令？通过处理器状态：**用户态（目态）**和**核心态（管态）**，通过**程序状态字寄存器（PSW）**进行存储。
>* 根据是否可以执行特权指令，程序分为：**内核程序（运行在核心态）**和**应用程序（运行在用户态）**  
>* 规定某些功能应该由内核程序来完成，内核程序实现的是内核功能，体系结构分为**大内核体系**和**微内核功能**
### 3.1内核功能（大内核）
大内核特点：组织结构混乱，效率高
* 硬件相关功能（微内核）保留了最基本的内核功能  
组织结构清晰，方便维护，效率低,因为要频繁在用户态和核心态之间切换
>* 时钟管理  
>* 中断处理
>* 原语（具有原子性）（如设备驱动、cpu切换等）
运行时间较短，调用频繁
* 硬件相关功能
>* 进程管理
>* 存储器管理
>* 设备管理器  

![]("https://github.com/2500664779/OperationSystem/raw/master/studyReview/pictures/1.3.jpg")

![](.\pictures\1.3.jpg)

#### 3.2中断和异常  
>* 为了解决串行效率底下的问题，引入**中断机制**，实现了多道程序并发执行。发生中断就意味着**需要操作系统介入**
>* 当cpu收到**中断信号**之后，cpu切换为核心态，把使用权限交给操作系统。  
> 中断信号可以**计时器发出**或者**应用程序发出系统调用请求**或者**设备发出io信号**

> **特点**
>>* 中断发生后，cpu立即进入核心态
>>* 中断发生后，当前进程暂停运行，由操作系统处理中断
>>* 对于上述不同分类的中断信号，操作系统会进行不同的处理
>> 从**用户态->内核态**的切换是通过并且仅通过中断来实现的，从**内核态->用户态**只需要切换程序状态字（PSW）即可，把其标志位改为“用户态标志”

> **种类**  
根据中断信号的来源分成内中断和外中断
>>* 内中断
>> 来自于cpu内部，，与cpu内部和当前执行的指令有关，入也称异常、例外、陷入，又分为**自愿中断**（系统调用时使用的访管指令）和**强迫中断**（例如硬件故障和软件终止）
终止通常来说不可恢复。
>>* 外中断
>> **io请求中断**和**人工干预**  
>>* 中断处理过程
cpu每执行完一个指令，都要检查是否有外部中断信号，如果有需要将正在运行的进程挂起，现场进行保护，保存程序状态字（PSW）以及程序计数器（PC）、各种通用寄存器。
![]()